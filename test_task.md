# ТЗ

- [ТЗ](#тз)
  - [Общее описание задачи](#общее-описание-задачи)
  - [Уточняющие данные](#уточняющие-данные)
    - [GET\_NOW](#get_now)
    - [GET\_FORECAST](#get_forecast)
  - [Требования](#требования)

## Общее описание задачи

Необходимо написать веб-сервис (HTTP), который будет предоставлять информацию о погоде в определенном городе. Для повышения надежности и увеличения точности работы сервиса рекомендуется использовать 2 внешних веб-сервиса, которые предоставляют метеоинформацию.

Сценарии использования создаваемого веб-сервиса:

- [Получить погоду в опеределенном местоположении в текущий момент](#get_now). Допустима погрешность в 1 час.
- [Получить прогноз погоды в опеределенном местоположении на определенную дату](#get_forecast). Допустима погрешность в 1 день.

Общий вид взаимодействия клиента и создаваемого веб-сервиса:

1. Клиент использует API-endpoint сервиса, передавая необходимую информацию.
2. Сервис выполняет валидацию полученной информации.
3. Сервис выполняет запрос на внешний веб-сервис(-ы) для получения информации.
4. Сервис обрабатывает информацию от внешнего веб-сервиса(-ов).
5. Сервис передает ответ клиенту.

## Уточняющие данные

### GET_NOW

Формат входных данных:

```jsonc
{
    "country": string,
    "city": string,
    "when": datetime
}
```

Формат выходных данных:

```jsonc
{
    "temp_celsium": string,
    "is_precipitation": bool
}
```

Основные обрабатываемые ошибки:

- При получении несуществующего местоположения следует передать клиенту ошибку.
- При недоступности всех используемых внешних веб-сервисов следует передать клиенту ошибку.

### GET_FORECAST

Формат входных данных:

```jsonc
{
    "country": string,
    "city": string,
    "when": datetime
}
```

Формат выходных данных:

```jsonc
{
    "temp_celsium": string,
    "is_precipitation": bool
}
```

Основные обрабатываемые ошибки:

- При получении несуществующего местоположения следует передать клиенту ошибку.
- При недоступности всех используемых внешних веб-сервисов следует передать клиенту ошибку.

## Требования

- Python3.10+.
- Список используемых пакетов для Python:
  - requirements.txt (для pip) или pyproject.toml + poetry.lock (для poetry).
- PEP8:
  - black + isort или ruff.
- FastAPI:
  - **No security features**.
- Использование Docker для развертывания сервиса.
- Гибкость конфигурации сервиса:
  - Порт для HTTP-сервера.
- Наличие документации:
  - API созданного сервиса в формате OpenAPI 3.0 (папка `docs/`).
  - Описание запуска сервиса (описание команд в README или наличие docker-compose файла).

## Веб-сервисы, которые предоставляют метеоинформацию.

Примеры веб-сервисов, которые предоставляют метеоинформацию:

- [WheaterAPI](https://www.weatherapi.com/pricing.aspx)
- [Tomorrow.io](https://www.tomorrow.io/weather-api/)
- [Open Meteo](https://open-meteo.com)
- etc.


